# Домашнее задание к занятию "4.7 Высокоуровневые протоколы"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.**

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "4.7 Высокоуровневые протоколы - Александр Дивеев"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

------

### Задание 1.

Какие порты используются протоколами:
- Telnet - по умолчанию 23 TCP;
- SSH - по умолчанию 22 TCP;
- FTP - по умолчанию 21 TCP;
- SNMP - 161 и 162 TCP и UDP. Порт 162 используется для ловушек (trap);

*Приведите ответ в виде списка портов.*

------

### Задание 2.

Какой по счету уровень модели OSI называется прикладным (`application layer`)?

*Зашифруйте ответ с помощью ключа: {5, 21}.*

**Ответ:** Уровень 7, после шифрования получается тоже 7

------

### Задание 3.

Создайте свой корневой сертификат, добавьте его в систему. 

Затем подпишите им свой сертификат.

**1. Генерируем ключ**

```
- openssl genrsa -out ca.key 2048
```

![Снимок01](https://user-images.githubusercontent.com/121082757/225524773-67d28594-aada-4536-b367-3218479e2e03.PNG)

**2. Генерируем корневой сертификат. Поля в сертификате указываем любые.**

```
- openssl req -x509 -new -nodes -key ca.key -sha256 -days 720 -out ca.pem
```

![Снимок02](https://user-images.githubusercontent.com/121082757/225524824-ac1d8b27-21c9-451e-8d86-510a0c53ff66.PNG)

**3. Сразу же сделаем сертификат в форме `crt`**

```
- openssl x509 -in ca.pem -inform PEM -out ca.crt
```

![Снимок03](https://user-images.githubusercontent.com/121082757/225524868-e0331d87-a6be-4ad0-84b5-6924299f9673.PNG)

**4. Далее установим сертификат в систему. Ниже пример для `Ubuntu`/`Debian` систем**

```
- sudo cp ca.crt /usr/local/share/ca-certificates/myca.crt && sudo update-ca-certificates
```

![Снимок04](https://user-images.githubusercontent.com/121082757/225524895-b897088d-794a-4407-9183-e720963ce387.PNG)

**5. Приступим к выпуску самого сертификата:**

**5.1. Генерируем ключи**

```
- openssl genrsa -out certificate.key 2048
```

![Снимок05](https://user-images.githubusercontent.com/121082757/225524923-74583056-fe31-488e-a918-2459cc8e6f5c.PNG)

**5.2. На основе ключа создаем `CSR`**

*Обратите внимание, что subject конечного сертификата __не должен__ совпадать с subject корневого. Хотя бы в одном поле нужно указать отличающееся значение, например в common Name или email. В противном случае конечный сертификат не будет верифицироваться, поскольку будет считаться самоподписным.*

```
- openssl req -new -key certificate.key -out certificate.csr
```

![Снимок06](https://user-images.githubusercontent.com/121082757/225524952-68999d7a-4de1-4cf2-8989-9c45865e0506.PNG)

**5.3. Подписываем `CSR` нашим корневым сертификатом. Тем самым создаем конечный сертификат.**

```
- openssl x509 -req -in certificate.csr -CA ca.pem -CAkey ca.key -CAcreateserial -out certificate.crt -days 360 -sha256
```

![Снимок07](https://user-images.githubusercontent.com/121082757/225524980-73a72ef1-11f9-416d-98cb-da413c041cf0.PNG)

**6. Проверяем валидность сертификата**

*Эта проверка должна вернуть `OK`. Если вы видите `failed`, значит, где-то допущена ошибка.*

```
- openssl verify certificate.crt
```

![Снимок08](https://user-images.githubusercontent.com/121082757/225525004-696578ae-9807-450e-901b-a5d4fe4c659a.PNG)

*В качестве ответа приложите снимки экрана с выводом информации о сертификатах и результатом верификации:*
```
openssl x509 -subject -issuer -noout -in ca.pem
openssl x509 -subject -issuer -noout -in certificate.crt
openssl verify certificate.crt
```

![Снимок09](https://user-images.githubusercontent.com/121082757/225525031-828e60d8-6c9c-47cc-9e26-fec6a222007e.PNG)

------
