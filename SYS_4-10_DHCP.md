# Домашнее задание к занятию "DHCP, PXE"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.** 

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "DHCP, PXE - Александр Александров"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. 

Для чего служит протокол `DHCP`? 

Может ли работать сеть без `DHCP-сервера`?

*Приведите ответ в свободной форме.*

### Ответ. 

- DHCP очень помогает в распределении IP-адресов в сети, в которой находятся десятки, а то и больше хостов. Назначить для каждого хоста свой IP-адрес - очень долгая процедура. И протокол DHCP предоставляет такую возможность сделать быстро. Это позволяет существенно снизить время на настройку сетевых параметров в компьютерах в больших сетях.

- Если сеть небольшая, то она вполне может существовать и без DHCP-сервера.

---

### Задание 2. 

На каком порту/портах работает `DHCP`? 

*Приведите ответ в свободной форме.*

### Ответ. 

Протокол DHCP использует UDP в качестве транспортного протокола и использует порты UDP 67/68. Хост отправляет запрос на порт 67 DHCP-сервера, а DHCP-сервер отвечает ответным сообщением на порт 68 хоста.

---

### Задание 3. 

Какие настройки можно произвести используя опции? 

Назовите 5.

*Приведите ответ в свободной форме.*

### Ответ. 

Для того, чтобы клиент мог получить полноценный доступ к ресурсам компьютерной сети, он  сообщает DHCP-серверу какие параметры ему необходимы и 
эти параметры называются DHCP опции. 

Самые часто используемые опции DHCP:
- опция 1 - маска подсети
- опция 3 - IP-адрес шлюза по умолчанию
- опция 6 - адреса DNS-серверов
- опция 15 - имя домена DNS
- опция 51 - на какой срок IP-адрес предоставляется в аренду клиенту и др.

Более полный список опция можно посмотреть **[тут](https://www.ibm.com/docs/ru/aix/7.2?topic=protocol-dhcp-server-file-known-options)**.

---

### Задание 4. 

Сконфигурируйте сервер `DHCP`.

*Пришлите получившийся конфигурационный файл.*

### Ответ. 

Установка DHCP-сервера - `sudo apt install isc-dhcp-server`.

Основной файл конфигурации DHCP — `/etc/dhcp/dhcpd.conf`. В него нужно внести всю информацию, отправляемую клиентам.

В начале этого файла идут глобальные параметры - это имя домена `domain-name`, имена DNS-серверов `domain-name-servers`, время аренды по умолчанию в секундах `default-lease-time` (если клиент не запросил его сам), максимальное время аренды в секундах `max-lease-time` и параметр `authoritative`, означающий «авторитетность» сервера в сегменте сети. Данный параметр нужен на тот случай, если клиент запросит неправильный IP-адрес — в этом случае сервер ответит ему отказом и предложит получить новый адрес.

`option domain-name "mydomian.ru";`

`option domain-name-servers server.mydomian.ru;`

`default-lease-time 7200;`

`max-lease-time 7200;`

`authoritative;`

Ниже надо задать уже параметры сети (маршрут, адреса, маску и т.п.).

`subnet 172.20.0.0 netmask 255.255.255.0 {`

     option routers 172.2.0.1;

      option subnet-mask 255.255.255.0;

      option domain-search ""mydomian.ru";

      option domain-name-servers server.mydomian.ru;

      range 172.20.0.5 172.20.0.50;

`}`

---

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.



### Задание 5. 

Поймайте в сети пакеты `DHCP` любым сниффером. 

*Пришлите скриншот пойманого одного пакета с объяснением что это за пакет, какой шаг получения сетевых настроек.*

---

### Задание 6. 

Сконфигурируйте сервер `PXE`, выложите любой образ. 

*Пришлите скриншот клиента, который получил настройки и подключился к `PXE-серверу`.*
