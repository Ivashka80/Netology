# Домашнее задание к занятию "4.12 HTTP/HTTPS"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.**

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "4.12 HTTP/HTTPS - Александр Дивеев"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

------
### Задание 1.

Какие коды ответов HTTP лучше соответствуют описанным ситуациям?

- Данная страница не найдена;
- Страница была перенесена на новый сайт;
- Ресурс удален;
- Пользователь не авторизован для просмотра страницы;
- Превышен лимит запросов от пользователя.

*Приведите ответ в свободной форме.*

### Ответ.
- 404 - Not Found - Сервер не может найти запрашиваемый ресурс.
- 301 - Moved Permanently - URI запрашиваемого ресурса был изменён. Возможно, новый URI будет предоставлен в ответе.
- 410 - Gone - Этот ответ отсылается, когда запрашиваемый контент удалён с сервера.
- 401 - Unauthorized - Для получения запрашиваемого ответа нужна аутентификация.
- 429 - Too Many Requests - Клиент попытался отправить слишком много запросов за короткое время, что может указывать, например, на попытку DDoS-атаки. 


### Задание 2.

1. Установите Nginx.

`sudo apt-get install nginx`

2. Сгенерируйте сертификат для него указав `localhost` в качестве `CN`.

`sudo openssl req -x509 -nodes -newkey rsa:4096 -keyout /etc/nginx/cert.key -out /etc/nginx/cert.pem -days 365`

3. Отредактируйте модуль `http` в файле `/etc/nginx/nginx.conf`.

```
http {
    gzip on;
    server {
        listen 80 default_server;
        root   /var/www/public;
        listen  443 ssl http2 default_server;
        server_name  localhost;
        ssl_certificate  /etc/nginx/cert.pem;
        ssl_certificate_key /etc/nginx/cert.key;
        ssl_protocols   TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers   HIGH:!aNULL:!MD5;
        location / {
            index index.html;
        }
    }
}
```

4. Создайте файл `/var/www/public/index.html` c содержимым.

```
<h1>It works</h1>
```

5. Зайдите на страницу в браузере, пропустив сообщение о неработающем сертификате.

*Пришлите скриншот работающей страницы https://localhost.*

### Ответ.

После установки nginx генерируем сертификат

<details>
    
![Снимок01](https://user-images.githubusercontent.com/121082757/228816529-2de2a1be-9105-44ef-ba92-6392b3c47520.PNG)
 
</details>

В файле `/etc/nginx/nginx.conf` меняем пользователя, от имени которого будет запускаться nginx.

<details>
    
![Снимок02](https://user-images.githubusercontent.com/121082757/228817037-490ef57d-06b8-42bf-9d41-b3c4b56a53fd.PNG)
 
</details>

Также в файле `/etc/nginx/nginx.conf` находится ссылка на директорию, в которой хранятся файлы сайтов. Можно создать свой, но я решил отредактировать `/etc/nginx/sites-enabled/default`

<details>
    
![Снимок03](https://user-images.githubusercontent.com/121082757/228819289-bf90a2d0-f188-440a-8c84-0588ff269513.PNG)

</details>

Создан файл `/var/www/public/index.html`

<details>
    
![Снимок04](https://user-images.githubusercontent.com/121082757/228817667-73f3df44-1a9d-4af6-95eb-5d0c43da52a2.PNG)

</details>

После внесения изменений в файл конфигурации надо перезапустить nginx - `systemctl restart nginx.service`.

Запускаем бразер и в адресную строку вбиваем `https://localhost`. Появится сообщение, что к сертификату нет доверия. Можно его просмотреть. После принятия в бразуере появляется сообщение из ранее созданного файла `/var/www/public/index.html`.

<details>
    
![Снимок05](https://user-images.githubusercontent.com/121082757/228818474-46a6998b-e561-4903-a9b2-3c4c5ade2df9.PNG)
    
![Снимок06](https://user-images.githubusercontent.com/121082757/228818509-0b7c82f9-8d6e-4d83-ad7b-f122baabb5db.PNG)
    
![Снимок07](https://user-images.githubusercontent.com/121082757/228818560-ac9c7916-7a3c-4fa8-a53f-d25e6e29c63d.PNG)

</details>

------

### Задание 3.

Измените конфигурацию сервера добавив переадресацию c Вашего сервера на сайт `netology.ru`.
```
location / {
  return 301 https://netology.ru;
}
```

*Используя curl сделайте запрос к своему серверу и в качестве ответа пришлите скриншот с 301 ответом.*

### Ответ.

Запрос к серверу после внесения изменений. Получен ответ с кодом 301 - Сайт "переехал".

<details>
    
![Снимок08](https://user-images.githubusercontent.com/121082757/228818765-78a81a1a-7aa7-4cbf-b965-de36bf827646.PNG)

</details>

---

<details>

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 4.

Используя документацию https://httpd.apache.org/docs/current/ установите `apache2` веб-сервер.

Сделайте задание 2, добившись аналогичной работы сервера.

*Пришлите получившуюся конфигурацию в качестве ответа.*

</details>
