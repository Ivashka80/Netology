# Домашнее задание к занятию "4.8. Траблшутинг"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.** 

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "4.8. Траблшутинг - Александр Александров"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. 

1. Укажите путь к файлам логов веб-сервера `Nginx`. 
2. Где находится конфигурационный файл, в котором можно посмотреть / поменять эти пути?
3. Какой командой можно воспользоваться для просмотра файла журнала в режиме реального времени?
Попробуйте найти сами, либо воспользуйтесь [ссылкой](https://andreyex.ru/operacionnaya-sistema-linux/nastrojka-zhurnala-oshibok-i-dostupa-nginx/).

*Приведите ответ в свободной форме.*

### *Ответ* 

1. Путь к лог-файлам журнала доступа - `/var/log/nginx/access.log`. Журнал ошибок - `/var/log/nginx/error.log`.

2. Основной файл конфигурации Nginx - `/etc/nginx/nginx.conf`. В разделе `Logging Settings`можно посмотреть/поменять пути к файлам логов Nginx.

3. Просмотреть файла журнала в режиме реального времени - `tail -f /var/log/nginx/access.log`.

---

### Задание 2. 

Познакомьтесь со схемой сети.

![](https://i.imgur.com/RefFHYj.png)

1. `COMP1` не может обменяться данными с `COMP4`. Какую последовательность действий вы выберете для того, чтобы локализовать проблему?
2. Возможно ли, чтобы при выполнении `ping 192.168.1.2` с компьютера `COMP5`, `ping` прошёл, а подключение по HTTP с `COMP5` на `COMP1` не проходило бы? Поясните свой  ответ максимально детально.
3. `COMP5` отправляет `ping` на `COMP1` и `COMP2`, при этом `COMP1` на `ping` отвечает, а `COMP2` - нет. 

Приведите максимальное количество причин. Самую простую, но нередко встречающуюся - «У `COMP2` выдернули кабель питания» - я уже ответил за вас.

4. `COMP1` пингует только адреса из подсети `192.168.1.0/24` (`COMP2` и `192.168.1.1`), больше никакие адреса не пингуются. С чем это может быть связано? 

*Приведите ответ в свободной форме.*

---

### *Ответ* 

1. - Для начала проверить провода и сигнал линка на сетевой карте. 
- проверить настройки сетевой карты (адрес, маршрут, шлюз).
- попробовать пропинговать.
- если пинга нет, командой tracerout проверить маршрут, где он обрывается. Если на одном из роутеров, то проверить не отключены ли интерфейсы, а также проверить их настройки.
- проверить настройки firewall, возможно там запрещен обмен данными между этими хостами.
- с помощью программ мониторинга посмотреть нагруженность сети, вдруг кто-то втихаря решил скачать все серии какого-нибудь сериала.

2. Вполне возможно. На хостах может быть установлено ПО разных версий. 

На `COMP1` также проверить, включен ли протокол HTTP и включен ли порт данного протокола и какой порт установлен. 

Также на `COMP1` может быть вообщене не установлен сервис HTTP. Если же всё ранее указанное есть, то включен ли DNS при обращении к сервису по имени HTTP.

Проверить настройки доступа к сервису. Может стоит запрет доступа именно для `COMP1`.

3. С б*о*льшей вероятностью предположу, что у `COMP2` стоит правило Firewall не отвечать на запросы ICMP (такое правило, например, установлено на большинстве хостов организации, где в данный момент работаю).

Также причиной могу предположить сетевые настройки `СОМР2` - неправильно или вообще не указан шлюз и обратный ответ не знает куда идти.

4. Проверить настройки сети `СОМР1` - указан ли шлюз по умолчанию. Также проверить настройки маршутизации у роутера, в котором также может быть не указан маршрут между сетями.

**

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.


### Задание 3. 

Используя схему из Задания 2, попробуйте ответить на вопросы:
1. `COMP1` и `COMP2` оба пингуют `10.1.1.2`, однако не пингуют `192.168.2.1` и прочие адреса из `192.168.2.0/24`. Как вы думаете, что не так и как это можно исправить?
2. Какими способами мы можем сделать так, чтобы `COMP2` не смог общаться ни с кем кроме своей локальной сети? (Приведите вариант с настройками самого `COMP2` и попробуйте придумать, можно ли что-то сделать на маршрутизаторе `192.168.1.1`)
3. Как вы думаете, что будет происходить при попытке провести `ping` с `COMP5` на `192.168.2.3` ?

*Приведите ответ в свободной форме.*

---

### Задание 4. 

- Сделайте `ping` с одной виртуальной / физической машины на другую.
- Используя [описание утилиты iperf](https://losst.ru/kak-polzovatsya-iperf), загрузите канал между двумя виртуальными машинами на максимум, например, на 60 секунд, в процессе загрузки повторите `ping`.
- Изменились ли цифры в ответе команды `ping`? Почему? Есть ли разница между физическими и виртуальными машинами?

*Приведите скриншоты/ответы команд до и во время высокой загрузки каналов.*

