# Домашнее задание к занятию «Docker. Часть 2»

<details>

### Оформление домашнего задания

1. Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте на проверку ссылку на ваш документ в личном кабинете.  
1. В названии файла укажите номер лекции и фамилию студента. Пример названия: 6.4. Docker. Часть 2 — Александр Александров.
2. Код решения размещайте в отдельном файле на вашем Google-диске, это облегчит проверку вашей работы.
3. Перед отправкой проверьте, что доступ для просмотра открыт всем, у кого есть ссылка. Если нужно прикрепить дополнительные ссылки, добавьте их в свой Google Docs.

**Правила выполнения заданий к занятию «6.4. Docker. Часть 2»**

- Все задания выполняйте на основе конфигов из лекции. 
- В заданиях описаны те параметры, которые необходимо изменить. 
- Если параметр не упомянут вообще, значит, его нужно оставить таким, какой он был в лекции. 
- Если в каком-то задании, например, в задании 2, нужно изменить параметр, подразумевается, что во всех следующих заданиях будет использоваться уже изменённый параметр.
- Выполнив все задания без звёздочки, вы должны получить полнофункциональный сервис.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Важно

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы. Это нужно, чтобы предупредить неконтролируемый расход средств, полученных после использования промокода.

Рекомендации [по ссылке](https://github.com/netology-code/sdvps-homeworks/tree/main/recommend).

</details>

---

### Задание 1

**Напишите ответ в свободной форме, не больше одного абзаца текста.**

Установите Docker Compose и опишите, для чего он нужен и как может улучшить вашу жизнь.

### Ответ

Docker Compose — входит в состав Docker. С помощью Docker Compose можно создать один YAML-файл для определения служб и с помощью одной команды запустить или остановить все, что нужно при развертывании многоконтейнерных приложений.

![image](https://user-images.githubusercontent.com/121082757/233980664-ec2b1d0d-e8bb-498d-a840-2d86c2475d58.png)

---

### Задание 2 

**Выполните действия и приложите текст конфига на этом этапе.** 

Создайте файл docker-compose.yml и внесите туда первичные настройки: 

 * version;
 * services;
 * networks.

При выполнении задания используйте подсеть 172.22.0.0.
Ваша подсеть должна называться: <ваши фамилия и инициалы>-my-netology-hw.

### Ответ


Создание файла `docker-compose.yml`. В данном файле указано, что при запуске создатся подсеть 172.22.0.0/24.

![image](https://user-images.githubusercontent.com/121082757/234181660-4ef678da-6709-4fa9-84df-32fb8d759e82.png)

---

### Задание 3 

**Выполните действия и приложите текст конфига текущего сервиса:** 

1. Установите PostgreSQL с именем контейнера <ваши фамилия и инициалы>-netology-db. 
2. Предсоздайте БД <ваши фамилия и инициалы>-db.
3. Задайте пароль пользователя postgres, как <ваши фамилия и инициалы>12!3!!
4. Пример названия контейнера: ivanovii-netology-db.
5. Назначьте для данного контейнера статический IP из подсети 172.22.0.0/24.

### Ответ

![image](https://user-images.githubusercontent.com/121082757/234264347-4eb9785d-de50-434a-89cd-138ad43b8740.png)

Запуск.

![image](https://user-images.githubusercontent.com/121082757/234264576-681a531a-c2a6-4e9f-b50d-8c833860e264.png)

---

### Задание 4 

**Выполните действия:**

1. Установите pgAdmin с именем контейнера <ваши фамилия и инициалы>-pgadmin. 
2. Задайте логин администратора pgAdmin <ваши фамилия и инициалы>@ilove-netology.com и пароль на выбор.
3. Назначьте для данного контейнера статический IP из подсети 172.22.0.0/24.
4. Прокиньте на 80 порт контейнера порт 61231.

В качестве решения приложите:

* текст конфига текущего сервиса;
* скриншот админки pgAdmin.

### Ответ

![image](https://user-images.githubusercontent.com/121082757/234288652-e09344b4-2dff-4eb0-a3cf-6490260f5cd2.png)

![image](https://user-images.githubusercontent.com/121082757/234288768-7c673d34-08e9-4691-9fd3-34a5a1697396.png)



---

### Задание 5 

**Выполните действия и приложите текст конфига текущего сервиса:** 

1. Установите Zabbix Server с именем контейнера <ваши фамилия и инициалы>-zabbix-netology. 
2. Настройте его подключение к вашему СУБД.
3. Назначьте для данного контейнера статический IP из подсети 172.22.0.0/24.

### Ответ

![image](https://user-images.githubusercontent.com/121082757/234497334-5b91ae0b-cd63-431c-b01b-f50976c60794.png)

---

### Задание 6

**Выполните действия и приложите текст конфига текущего сервиса:** 

1. Установите Zabbix Frontend с именем контейнера <ваши фамилия и инициалы>-netology-zabbix-frontend. 
2. Настройте его подключение к вашему СУБД.
3. Назначьте для данного контейнера статический IP из подсети 172.22.0.0/24.

### Ответ

![image](https://user-images.githubusercontent.com/121082757/234500049-b67fb48b-9c1b-4de7-ad10-0ec7c0ab4b2b.png)

---

### Задание 7 

**Выполните действия.**

Настройте линки, чтобы контейнеры запускались только в момент, когда запущены контейнеры, от которых они зависят.

В качестве решения приложите:

* текст конфига **целиком**;
* скриншот команды docker ps;
* скриншот авторизации в админке Zabbix.

### Ответ

<details>

  version: '3.9'

  services:
    chistov-netology-db:  #назвазние сервиса
      image: postgres:latest #используемый образ
      container_name: chistov-netology-db #назвазние контейнера
      volumes:
        - ./pg_data:/var/lib/postgresql/data/pgdata #указываем папку, которая будет проброшена с хост>
      environment:
        POSTGRES_DB: chistov-db #название создаваемой базы
        POSTGRES_PASSWORD: chistov12!3!! #пароль для входа
        PGDATA: /var/lib/postgresql/data/pgdata #путь в котнейнере, куда будут сохранятся данные
      ports:
        - 5432:5432 #порты для проброса с хоста в контейнер
      networks:
        chistov-my-netology-hw:
         ipv4_address: 172.22.0.5 #задаем статичнй ip-адрес
      restart: always #в случае перезапуска машины контейнер снова запустится
  
    pgAdmin:
      image: dpage/pgadmin4
      links:
        - chistov-netology-db
      container_name: chistov-pgadmin
      environment:
        PGADMIN_DEFAULT_EMAIL: chistov@ilove-netology.com
        PGADMIN_DEFAULT_PASSWORD: chistov12!3!!
      ports:
        - 61231:80
      networks:
        chistov-my-netology-hw:
          ipv4_address: 172.22.0.6
      restart: always
  
    zabbix-server-pgsql:
      image: zabbix/zabbix-server-pgsql
      links:
        - chistov-netology-db
        - pgAdmin
      container_name: chistov-zabbix-netology
      environment:
        DB_SERVER_HOST: 172.22.0.5
        POSTGRES_USER: postgres
        POSTGRES_PASSWORD: chistov12!3!!
      ports:
        - 10051:10051
      networks:
        chistov-my-netology-hw:
          ipv4_address: 172.22.0.7
      restart: always
  
    zabbix_frontend:
      image: zabbix/zabbix-web-apache-pgsql
      links:
        - chistov-netology-db
        - chistov-pgadmin
        - zabbix-server-pgsql
      container_name: chistov-netology-zabbix-frontend
      environment:
        DB_SERVER_HOST: 172.22.0.5
        POSTGRES_USER: postgres
        POSTGRES_PASSWORD: chistov12!3!!
        ZBX_SERVER_HOST: zabbix_frontend
        PHP_TZ: Europe/Moscow
      ports:
        - 80:8080
        - 443:8443
      networks:
        chistov-my-netology-hw:
          ipv4_address: 172.22.0.8
      restart: always
  
  networks:
    chistov-my-netology-hw:
      driver: bridge
      ipam:
        config:
          - subnet: 172.22.0.0/24

</details>

![image](https://user-images.githubusercontent.com/121082757/234516522-4818e946-c1ff-4cc6-941c-2c1e4efc4111.png)

---

### Задание 8 

**Выполните действия:** 

1. Убейте все контейнеры и потом удалите их.
2. Приложите скриншот консоли с проделанными действиями.

### Ответ



---

<details>
  
## Дополнительные задания* (со звёздочкой)

Их выполнение необязательное и не влияет на получение зачёта по домашнему заданию. Можете их решить, если хотите лучше разобраться в материале.

---

### Задание 9* 

Запустите свой сценарий на чистом железе без предзагруженных образов.

**Ответьте на вопросы в свободной форме:**

1. Сколько ушло времени на то, чтобы развернуть на чистом железе написанный вами сценарий?
2. Чем вы занимались в процессе создания сценария так, как это видите вы?
3. Что бы вы улучшили в сценарии развёртывания?

</details>
